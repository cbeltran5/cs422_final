<!-- template for Project 1 - CS 422 - Spring 2016 - Andrew Johnson -->

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>CS 422 Project 2. Door-é-mi</title>

    <style>
      code {
        background: #1D5F9A;
        border-radius: 6px;
        color: #fff;
        display: block;
        font: 44px/64px "Source Code Pro", Inconsolata, "Calibri", Terminal, "Calibri", Courier;
        padding: 24px 15px;
        text-align: left;
      }
      header,
      section,
      aside,
      footer {
        margin: 1% 20px;
      }
      section {
        float: left;
        width: auto;
        height: auto;
      }
      aside {
        float: left;
        width: auto;
        height: auto;
      }
      footer {
        clear: both;
        margin-bottom: 0;
      }
      .radio1 {
        width: 40px;
        height: 40px;
      }

    </style>

<!-- ADD SOURCE FILES HERE! -->
<!-- Get version 1.5.0 of Fabric.js from CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.5.0/fabric.min.js" ></script>
<script src="enrique.js"></script>
<script src="gabe.js"></script>
<script src="abeer.js"></script>
<script src="carlos.js"></script>


<body>
    <!-- canvas tag for Fabric.js to draw into -->
    <!-- set this to some appropriate size for your development work -->
    <!-- but keep the same aspect ratio -->
    <!-- we will use width="2714" height="2200" for presentations and evaluation -->
	<!-- <canvas id="c" width="494" height="400" style="border:2px solid black;" ></canvas> -->
    <canvas id="c" width="2714" height="2200" style="border:2px solid black;" ></canvas>
    <section>
    <h1>Inside Events</h1>
    <code>
      <section>
      <code>
      <form> Users:<br>
        <div id = "UsersFromInside">
          <label for="NoSignalInside"><input type="radio" class="radio1" name="UsersIn" onchange="NoSignalFromInside()" value="NoSignal" checked> No Signal<br></label>
          <label for="UnknownPersonInside"><input type="radio" class="radio1" name="UsersIn" onchange="NewUserFromInside()" value="NewUser"> Unknown Person<br></label>
          <label for="MultiUserInside"><input type="radio" class="radio1" name="UsersIn" onchange="MultiUsersFromInside()" value="MultiUser"> Multiple People<br></label>
        </div>

      </form>
      </code>
      </section>

      <section>
      <code>
      <form > Heights:<br>
        <div id="Heights">
          <label for="Tall"><input type="radio" class="radio1" name="Heights" id='Tall' onchange="AdjustHeight(this.value)" value="Tall"> Tall<br></label>
          <label for="Medium"><input type="radio" class="radio1" name="Heights" id='Medium'onchange="AdjustHeight(this.value)" value="Medium" checked> Medium<br></label>
          <label for="Short"><input type="radio" class="radio1" name="Heights" id='Short'onchange="AdjustHeight(this.value)" value="Short"> Short<br></label>
        </div>
      </form>
      </code>
      </section>
      <section></section>
      <section></section>
      <section></section>
      <section></section>
      <section></section>
      <section></section>
    </code>
    </section>


    <section>
    <h1>Outside Events</h1>
    <code>
      
      
      <section>
      <code>
      <form name="UsersOutside"> Users:<br>
        <div id="UsersFromOutside">
          <label for="NoSignal"><input type="radio" class="radio1" name="UsersOut" onchange="NoUserFromOutside()" value="NoSignal" checked> No Signal<br></label>
          <label for="Unknown Person"><input type="radio" class="radio1" name="UsersOut" onchange="NewUserFromOutside()" value="NewUser"> Unknown Person<br></label>
          <label for="Multiple People"><input type="radio" class="radio1" name="UsersOut" onchange="MultiUsersOutside()" value="NewUser"> Multiple People<br></label>
        </div>
      </form></code>
      </section>

      
      <section>
      <code>
      <form name="Verification"> Verification1:<br>
        <div id="Verification1">
          <label for="None"><input type="radio" class="radio1" name="Verification1" onchange="FailedVerification()" value="None" checked> None<br></label>
          <label for="FacialRecognition"><input type="radio" class="radio1" name="Verification1" onchange="FaceRecognized()" value="Phone/KeyFob"> Phone/KeyFOB<br></label>
          <label for="FacialRecognition"><input type="radio" class="radio1" name="Verification1" onchange="FaceRecognized()" value="Face"> Facial Recognition<br></label>
          <label for="FingerPrints"><input type="radio" class="radio1" name="Verification1" onchange="FingerRecognized()" value="FingerPrint"> FingerPrint<br></label>
          <label for="FingerPrints"><input type="radio" class="radio1" name="Verification1" onchange="FingerRecognized()" value="FingerPrint"> Number Pad<br></label>
        </div>
      </form>
      </code>
      </section>
      
      <section>
      <code>
      <form name="Verification"> Verification2:<br>
        <div id="Verification2">
          <label for="FacialRecognition"><input type="radio" class="radio1" name="Verification" onchange="FaceRecognized()" value="Phone/KeyFob" disabled> Phone/KeyFOB<br></label>
          <label for="FacialRecognition"><input type="radio" class="radio1" name="Verification" onchange="FaceRecognized()" value="Face" disabled> Facial Recognition<br></label>
          <label for="FingerPrints"><input type="radio" class="radio1" name="Verification" onchange="FingerRecognized()" value="FingerPrint" disabled> FingerPrint<br></label>
          <label for="FingerPrints"><input type="radio" class="radio1" name="Verification" onchange="FingerRecognized()" value="FingerPrint" disabled> Number Pad<br></label>
        </div>
      </form>
      </code>
      </section>
      
    </code>
    </section>
</body>

<script>
// the aspect ratios given here are not quite tall enough for a 36" x 80" door
// we are assuming bottom 15 inches of the door are not part of the display.
// that part contains lots of necessary electronics so the bottom of the door
// sits off the bottom of our display wall. You are implementing the interface
// for the top 65" of the display / door

//(function() {

// within the code below I assume I am drawing into a 1220x990 box
// then I can scale the group to whatever size the final canvas is
var localHeight = 990;
var localWidth = 1220;

//var checkedRB = $('input[type="radio"][name="layout"]:checked');

var canvas = this.__canvas = new fabric.Canvas('c');

// set background to blue to make it easier to see it
canvas.backgroundColor = "#DDDDDD";  // light grey

//****************************** System Settings Parameters *********************************

// syslang is an index into an array that represents a word in a language.
// ENGLISH = 0, SPANISH = 1, etc
var syslang = ENGLISH; // set to english by default
var System_language = SYSTEM_LANGUAGE[syslang];

// width for both doors
var doorwidth = 555;
// value for left side of rect object representing door, relative to the canvas
var inside_left = 22;
var outside_left = 642;

var In_theme = 'default';
var In_ornament = 'default';
var Out_theme = 'default';
var Out_ornament = 'default';

var Date_format = DATE_MONTHDDYYYY;
var Time_format = TIME_12HOUR;
var TemperatureUnits = F;

var HomeIsActive = false;
var SettingsIsActive = false;
var UserFingerIsRecognizable = false;
var Height = 0;
var ImgHeight = Height*2.22222222;
var RestartIsActive = false;
var AvatarIsActive = false;

var ArrayOfObjects = [];
var OriginalObjCoordinate = [];
var counter = 0;
HeightsRadioButtons_DISABLE();

//*******************************************************************************************

//************************************ Users Profiles ***************************************

var User0 = new User('Gabe', 'Mendoza', ENGLISH);
var User1 = new User('Enrique', 'Vaca', SPANISH);
var User2 = new User('Adam', 'Porter', ENGLISH);
var User3 = new User('Sara', 'Parker', ENGLISH);
var User4 = new User('Carlos', 'Beltran', SPANISH);
var User5 = new User('Abeer','A.', ENGLISH);


//*******************************************************************************************


// need 36 wide instead of 40 as now
//*************************** Inside & Outside door initialization **************************

var insideDoor = new fabric.Rect({
  left: inside_left,
  top: 0,
  fill: 'grey',
  stroke: 'black',
  width: doorwidth,
  height: localHeight,
  angle: 0
});

// the doors will not be selectable or movable
insideDoor.hasControls = insideDoor.hasBorders = insideDoor.selectable = false;
insideDoor.lockMovementX = insideDoor.lockMovementY = true;
// Default door pattern
fabric.util.loadImage('images/Doorpattern.gif', function (img) {
  insideDoor.setPatternFill({
    source: img,
    repeat: 'repeat'
  });
  canvas.renderAll();
});

var outsideDoor = new fabric.Rect({
  left: outside_left,
  top: 0,
  fill: 'grey',
  stroke: 'black',
  width: doorwidth,
  height: localHeight,
  angle: 0
});

outsideDoor.hasControls = outsideDoor.hasBorders = outsideDoor.selectable = false;
outsideDoor.lockMovementX = outsideDoor.lockMovementY = true;
// Default door pattern
fabric.util.loadImage('images/DoorpatternOut.gif', function (img) {
  outsideDoor.setPatternFill({
    source: img,
    repeat: 'repeat'
  });
  canvas.renderAll();
});
//*******************************************************************************************


//******************************* Adding Date/Time and weather ******************************

var Datetext = new fabric.Text('', {
  left: 102,
  top: 112,
  fontFamily: 'Calibri',
  fontSize: 20
});
Datetext.setColor('black');
Datetext.selectable = false;

var date_rect = new fabric.Rect({
  left: 85,
  top: 110,
  fill: 'lightgrey',
  stroke: 'darkgrey',
  width: 150,
  height: 25,
  angle: 0
});
date_rect.selectable = false;

var Timetext = new fabric.Text('', {
  left: 100,
  top: 76,
  fontFamily: 'Calibri',
  fontSize: 30
});

Timetext.setColor('black');
Timetext.selectable = false;

ShowDateTime();

var icon_weather;
fabric.Image.fromURL('images/weather.gif', function(oImg) {
  oImg.set({left: 800, top: 95, id: this.id});
  oImg.selectable = false;
  oImg.id = 'weather';
  icon_weather = oImg;
  canvas.add(icon_weather);
});

var Weathertext = new fabric.Text('49 F', {
  left: 475,
  top: 80,
  fontFamily: 'Calibri',
  fontSize: 30
});
Weathertext.setColor('black');
Weathertext.selectable = false;

//*******************************************************************************************



//****************** Adding In/out Door knobs ******************************************
var doorknob_inside_locked;
//var XXX = new ...
  fabric.Image.fromURL('images/lockknob.png', function(oImg) {
  oImg.set({left: 1120, top: 1030, id: this.id});
  oImg.id = 'LockKnobIn';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.visible = true;
  oImg.lockMovementY = oImg.lockMovementX = true;
  doorknob_inside_locked = oImg;
  canvas.add(doorknob_inside_locked);
//    console.log(doorknob_inside_locked);
});
//  console.log("XXX");
//  console.log(XXX);
//console.log(doorknob_inside_locked);

var doorknob_inside_unlocked;
fabric.Image.fromURL('images/unlockknob2.png', function(oImg) {
  oImg.set({left: 1110, top: 1020, id: this.id});
  oImg.id = 'UnlockKnobIn';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.visible = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  doorknob_inside_unlocked = oImg;
  canvas.add(doorknob_inside_unlocked);
});

var deadbolt_locked;
fabric.Image.fromURL('images/lockdeadbolt.png', function(oImg) {
  oImg.set({left: 1100, top: 680, id: this.id});
  oImg.id = 'LockDeadbolt';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  deadbolt_locked = oImg;
  canvas.add(deadbolt_locked);
});

var deadbolt_unlocked;
fabric.Image.fromURL('images/unlockdeadbolt.png', function(oImg) {
  oImg.set({left: 1100, top: 680, id: this.id});
  oImg.id = 'UnlockDeadbolt';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.visible = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  deadbolt_unlocked = oImg;
  canvas.add(deadbolt_unlocked);
});

var doorknob_outside_blank;
fabric.Image.fromURL('images/knob.png', function(oImg) {
  oImg.set({left: 1480, top: 1030, id: this.id});
  oImg.id = 'knob';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  doorknob_outside_blank = oImg;
  canvas.add(doorknob_outside_blank);
});

var doorknob_outside_locked;
fabric.Image.fromURL('images/lockknob.png', function(oImg) {
  oImg.set({left: 1480, top: 1030, id: this.id});
  oImg.id = 'LockKnobOut';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.visible = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  doorknob_outside_locked = oImg;
  canvas.add(doorknob_outside_locked);
});

var doorknob_outside_unlocked;
fabric.Image.fromURL('images/unlockknob2.png', function(oImg) {
  oImg.set({left: 1470, top: 1020, id: this.id});
  oImg.id = 'UnlockKnobOut';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.visible = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  doorknob_outside_unlocked = oImg;
  canvas.add(doorknob_outside_unlocked);
});

var Deadbolttext = new fabric.Text(DEADBOLT[syslang], {
  left: 500,
  top: 293,
  fontFamily: 'Calibri',
  fontSize: 15
});
Deadbolttext.setColor('black');
Deadbolttext.selectable = false;
//********************************************************************************************



//*********************** Components called by functions *************************************
//To Do/Calender
var calendar_user1;
var calendar_user = new fabric.Image.fromURL('images/user1calender.gif', function(oImg) {
  oImg.set({left: 220, top: 730 + ImgHeight, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'user1calender';
  calendar_user1 = oImg
  ArrayOfObjects.push(calendar_user1);
  canvas.add(calendar_user1);
  User1.addObject(calendar_user1);
});


var calendar_user2;
fabric.Image.fromURL('images/user1calender.gif', function(oImg) {
  oImg.set({left: 220, top: 730 + ImgHeight, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'user2calender';
  calendar_user2 = oImg;
  ArrayOfObjects.push(calendar_user2);
  canvas.add(calendar_user2);
  User2.addObject(calendar_user2);
});

var todo_list_user1;
fabric.Image.fromURL('images/user1todo.gif', function(oImg) {
  oImg.set({left: 660, top: 730 + ImgHeight, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'user1todo';
  todo_list_user1 = oImg;
  ArrayOfObjects.push(todo_list_user1);
  canvas.add(todo_list_user1);
  User1.addObject(todo_list_user1);
});

var todo_list_user2;
fabric.Image.fromURL('images/user2todo.gif', function(oImg) {
  oImg.set({left: 660, top: 730 + ImgHeight, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'user2todo';
  todo_list_user2 = oImg;
  ArrayOfObjects.push(todo_list_user2);
  canvas.add(todo_list_user2);
  User2.addObject(todo_list_user2);
});


var list_of_users;
fabric.Image.fromURL('images/UsersList.gif', function(oImg) {
  oImg.set({left: 440, top: 730 + ImgHeight, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'userslist';
  list_of_users = oImg;
  ArrayOfObjects.push(list_of_users);
  canvas.add(list_of_users);
});

var name_user1;
fabric.Image.fromURL('images/user1name.gif', function(oImg) {
  oImg.set({left: 440, top: 830 + ImgHeight, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'user1name';
  name_user1 = oImg;
  ArrayOfObjects.push(name_user1);
  canvas.add(name_user1);
});

var name_user2;
fabric.Image.fromURL('images/user2name.gif', function(oImg) {
  oImg.set({left: 440, top: 911 + ImgHeight, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'user2name';
  name_user2 = oImg;
  ArrayOfObjects.push(name_user2);
  canvas.add(name_user2);
});


//******************************* Home Button ****************************************
var home_topheight = 555;

var icon_home;
fabric.Image.fromURL('images/home.gif', function(oImg) {
  oImg.set({left: 549, top: 555, id: this.id});
  oImg.id = 'home';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.visible = false;
  icon_home = oImg;
  ArrayOfObjects.push(icon_home);
  canvas.add(icon_home);
});

var Line = new fabric.Line([100, 310, 460, 310], {
  lfill: 'black',
  stroke: 'black',
  strokeWidth: 0.5,
  visible: false
});
Line.selectable = false;
ArrayOfObjects.push(Line);
//********************************************************************************************



//********************************************************************************************
// Main panel components
var PanelRect = new fabric.Rect({
  left: 72,
  top: 310,
  fill: 'lightgrey',
  stroke: 'darkgrey',
  width: 410,
  height: 200,
  angle: 0
});
PanelRect.visible = false;
PanelRect.hasControls = PanelRect.hasBorders = PanelRect.selectable = false;
PanelRect.lockMovementX = PanelRect.lockMovementY = true;

fabric.util.loadImage('images/panelpattern.gif', function (img) {
  PanelRect.setPatternFill({
    source: img,
    repeat: 'repeat'
  });
});
ArrayOfObjects.push(PanelRect);
//********************************************************************************************



//********************************************************************************************
// FIRST COLUMN OF ITEMS
// MESSAGES
var icon_messages;
fabric.Image.fromURL('images/messages.gif', function(oImg) {
  oImg.set({left: 189, top: 730, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'messages';
  icon_messages = oImg;
  ArrayOfObjects.push(icon_messages);
  canvas.add(icon_messages);
});

var Messagestext = new fabric.Text(MESSAGES[syslang], {
  left: 85,
  top: 385,
  fontFamily: 'Times',
  fontSize: 15
});
Messagestext.setColor('black');
Messagestext.selectable = false;
Messagestext.visible = false;
ArrayOfObjects.push(Messagestext);

// MIRROR
var Mirror = new fabric.Rect({
  left: 22,
  top: 0,
  fill: 'grey',
  stroke: 'black',
  width: 555,
  height: localHeight,
  angle: 0
});
Mirror.visible = false;
Mirror.hasControls = Mirror.hasBorders = Mirror.selectable = false;
Mirror.lockMovementX = Mirror.lockMovementY = true;

fabric.util.loadImage('images/mirrorwomen.gif', function (img) {
  Mirror.setPatternFill({
    source: img,
    ßrepeat: 'repeat'
  });
});

var icon_mirror;
fabric.Image.fromURL('images/mirror.gif', function(oImg) {
  oImg.set({left: 189, top: 925, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'mirror';
  icon_mirror = oImg;
  ArrayOfObjects.push(icon_mirror);
  canvas.add(icon_mirror);
});

var Mirrortext = new fabric.Text(MIRROR[syslang], {
  left: 95,
  top: 475,
  fontFamily: 'Times',
  fontSize: 15
});
  Mirrortext.setColor('black');
  Mirrortext.selectable = false;
  Mirrortext.visible = false;
  ArrayOfObjects.push(Mirrortext);

//********************************************************************************************


//********************************************************************************************
// SECOND COLUMN OF ITEMS
// CAMERA
var icon_camera;
fabric.Image.fromURL('images/camera.gif', function(oImg) {
  oImg.set({left: 369, top: 735, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'camera';
  icon_camera  = oImg;
  ArrayOfObjects.push(icon_camera);
  canvas.add(icon_camera);
});

var Cameratext = new fabric.Text(CAMERA[syslang], {
  left: 165,
  top: 385,
  fontFamily: 'Times',
  fontSize: 15
});
Cameratext.setColor('black');
Cameratext.selectable = false;
Cameratext.visible = false;
ArrayOfObjects.push(Cameratext);

// LIGHTS
var icon_lights;
fabric.Image.fromURL('images/lights.gif', function(oImg) {
  oImg.set({left: 369, top: 920, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'lights';
  icon_lights = oImg;
  ArrayOfObjects.push(icon_lights);
  canvas.add(oImg);
});

var Lightstext = new fabric.Text(LIGHTS[syslang], {
  left: 175,
  top: 475,
  fontFamily: 'Times',
  fontSize: 15
});
Lightstext.setColor('black');
Lightstext.selectable = false;
Lightstext.visible = false;
ArrayOfObjects.push(Lightstext);

var Lights = new fabric.Rect({
  left: 22,
  top: 0,
  fill: 'grey',
  stroke: 'black',
  width: 555,
  height: localHeight,
  angle: 0
});
Lights.visible = false;
Lights.hasControls = Lights.hasBorders = Lights.selectable = false;
Lights.lockMovementX = Lights.lockMovementY = true;

fabric.util.loadImage('images/black.gif', function (img) {
  Lights.setPatternFill({
    source: img,
    repeat: 'repeat'
  });
});
ArrayOfObjects.push(Lights);
//********************************************************************************************


//********************************************************************************************
// THIRD COLUMN OF ITEMS
// TRAFFIC
var icon_traffic;
fabric.Image.fromURL('images/traffic.gif', function(oImg) {
  oImg.set({left: 549, top: 720, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'traffic';
  icon_traffic = oImg;
  ArrayOfObjects.push(icon_traffic);
  canvas.add(icon_traffic);
});

var Traffictext = new fabric.Text(TRAFFIC[syslang], {
  left: 255,
  top: 385,
  fontFamily: 'Times',
  fontSize: 15
});
Traffictext.setColor('black');
Traffictext.selectable = false;
Traffictext.visible = false;
ArrayOfObjects.push(Traffictext);

var Traffic = new fabric.Rect({
  left: 175,
  top: 310,
  fill: 'grey',
  stroke: 'black',
  width: 210,
  height: 200,
  angle: 0
});
Traffic.visible = false;
Traffic.hasControls = Traffic.hasBorders = Traffic.selectable = false;
Traffic.lockMovementX = Traffic.lockMovementY = true;

fabric.util.loadImage('images/traffic.png', function (img) {
  Traffic.setPatternFill({
      source: img,
      repeat: 'repeat'
  });
});
ArrayOfObjects.push(Traffic);

// ALARM
var icon_alarm_off;
fabric.Image.fromURL('images/alarm.gif', function(oImg) {
  oImg.set({left: 549, top: 920, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'alarm';
  icon_alarm_off = oImg;
  ArrayOfObjects.push(icon_alarm_off);
  canvas.add(icon_alarm_off);
});
var icon_alarm_on;
fabric.Image.fromURL('images/alarmOn.gif', function(oImg) {
  oImg.set({left: 549, top: 920, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'alarmOn';
  icon_alarm_on = oImg;
  canvas.add(icon_alarm_on);
});

var Alarmtext = new fabric.Text(ALARM[syslang], {
  left: 255,
  top: 475,
  fontFamily: 'Times',
  fontSize: 15
});
Alarmtext.setColor('black');
Alarmtext.selectable = false;
Alarmtext.visible = false;
ArrayOfObjects.push(Alarmtext);
//********************************************************************************************



//********************************************************************************************
// FOURTH COLUMN OF ITEMS
// TRANSPORT - CTA
var icon_trasportation;
fabric.Image.fromURL('images/cta.gif', function(oImg) {
  oImg.set({left: 729, top: 720, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'cta';
  icon_trasportation = oImg;
  ArrayOfObjects.push(icon_trasportation);
  canvas.add(icon_trasportation);
});

var Transporttext = new fabric.Text(TRANSPORT[syslang], {
  left: 330,
  top: 385,
  fontFamily: 'Times',
  fontSize: 15
});
Transporttext.setColor('black');
Transporttext.selectable = false;
Transporttext.visible = false;
ArrayOfObjects.push(Transporttext);

var Transport = new fabric.Rect({
  left: 185,
  top: 310,
  width: 187,
  height: 195,
  angle: 0
});
Transport.visible = false;
Transport.hasControls = Transport.hasBorders = Transport.selectable = false;
Transport.lockMovementX = Transport.lockMovementY = true;

fabric.util.loadImage('images/transport.jpeg', function (img) {
  Transport.setPatternFill({
    source: img,
    repeat: 'repeat'
  });
});
ArrayOfObjects.push(Transport);

// EMERGENCY
var icon_911;
fabric.Image.fromURL('images/911.gif', function(oImg) {
  oImg.set({left: 729, top: 935, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = '911';
  icon_911 = oImg;
  ArrayOfObjects.push(icon_911);
  canvas.add(icon_911);
});

var Emergtext = new fabric.Text(EMERGENCY[syslang], {
  left: 325,
  top: 475,
  fontFamily: 'Times',
  fontSize: 15
});
Emergtext.setColor('black');
Emergtext.selectable = false;
Emergtext.visible = false;
ArrayOfObjects.push(Emergtext);
//********************************************************************************************


//********************************************************************************************
// FIFTH COLUMN OF ITEMS
// NEWS
var icon_news;
fabric.Image.fromURL('images/news.gif', function(oImg) {
  oImg.set({left: 909, top: 730, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'news';
  icon_news = oImg;
  ArrayOfObjects.push(icon_news);
  canvas.add(icon_news);
});

var Newstext = new fabric.Text(NEWS[syslang], {
  left: 420,
  top: 385,
  fontFamily: 'Times',
  fontSize: 15
});
Newstext.setColor('black');
Newstext.selectable = false;
Newstext.visible = false;
ArrayOfObjects.push(Newstext);

var News = new fabric.Rect({
  left: 135,
  top: 310,
  //fill: 'grey',
  //stroke: 'black',
  width: 300,
  height: 202,
  angle: 0
});
News.visible = false;
News.hasControls = News.hasBorders = News.selectable = false;
News.lockMovementX = News.lockMovementY = true;

fabric.util.loadImage('images/news.jpg', function (img) {
  News.setPatternFill({
    source: img,
    repeat: 'repeat'
  });
});
ArrayOfObjects.push(News);

// SETTINGS
var icon_settings;
fabric.Image.fromURL('images/settings.gif', function(oImg) {
  oImg.set({left: 909, top: 930, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'settings';
  icon_settings = oImg;
  ArrayOfObjects.push(icon_settings);
  canvas.add(icon_settings);
});

var Settingstext = new fabric.Text(SETTINGS[syslang], {
  left: 415,
  top: 475,
  fontFamily: 'Times',
  fontSize: 15
});
Settingstext.setColor('black');
Settingstext.selectable = false;
Settingstext.visible = false;
ArrayOfObjects.push(Settingstext);


//********************************************************************************************
// SETTINGS PANEL
//********************************************************************************************
// FIRST COLUMN OF ITEMS
// User
var icon_users;
fabric.Image.fromURL('images/Settings/users.gif', function(oImg) {
  oImg.set({left: 189, top: 730, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'settings_users';
  icon_users = oImg;
  ArrayOfObjects.push(icon_users);
  canvas.add(icon_users);
});

var UsersText = new fabric.Text(USERS[syslang], {
  left: 94,
  top: 389,
  fontFamily: 'Times',
  fontSize: 15
});
UsersText.setColor('black');
UsersText.selectable = false;
UsersText.visible = false;
ArrayOfObjects.push(UsersText);

var UserPanel = new fabric.Rect({
  left: 155,
  top: 310,
  fill: 'grey',
  stroke: 'black',
  width: 274,
  height: 194,
  angle: 0
});
UserPanel.visible = false;
UserPanel.hasControls = UserPanel.hasBorders = false;
UserPanel.lockMovementX = UserPanel.lockMovementY = true;
UserPanel.id = 'user_panel';

fabric.util.loadImage('images/Settings/users_gabe_active.gif', function (img) {
  UserPanel.setPatternFill({
    source: img,
    repeat: 'repeat'
  });
});
ArrayOfObjects.push(UserPanel);

var sendKey = new fabric.Rect({
  left: 165,
  top: 315,
  fill: 'grey',
  stroke: 'black',
  width: 230,
  height: 175,
  angle: 0
});
sendKey.visible = false;
sendKey.hasControls = sendKey.hasBorders = false;
sendKey.lockMovementX = sendKey.lockMovementY = true;
sendKey.id = 'sendKey';

fabric.util.loadImage('images/Settings/init_send_key.gif', function (img) {
  sendKey.setPatternFill({
    source: img,
    repeat: 'no-repeat'
  });
});
ArrayOfObjects.push(sendKey);

var input_sendKey = new fabric.Rect({
  left: 165,
  top: 315,
  fill: 'grey',
  stroke: 'black',
  width: 230,
  height: 175,
  angle: 0
});
input_sendKey.visible = false;
input_sendKey.hasControls = input_sendKey.hasBorders = false;
input_sendKey.lockMovementX = input_sendKey.lockMovementY = true;
input_sendKey.id = 'input_send_key';

fabric.util.loadImage('images/Settings/input_send_key.gif', function (img) {
  input_sendKey.setPatternFill({
    source: img,
    repeat: 'no-repeat'
  });
});
ArrayOfObjects.push(input_sendKey);

var post_sendKey = new fabric.Rect({
  left: 160,
  top: 310,
  fill: 'grey',
  stroke: 'black',
  width: 255,
  height: 214,
  angle: 0
});
post_sendKey.visible = false;
post_sendKey.hasControls = post_sendKey.hasBorders = false;
post_sendKey.lockMovementX = post_sendKey.lockMovementY = true;
post_sendKey.id = 'post_sendKey';

fabric.util.loadImage('images/Settings/post_send_key.gif', function (img) {
  post_sendKey.setPatternFill({
    source: img,
    repeat: 'no-repeat'
  });
});
ArrayOfObjects.push(post_sendKey);


// language
var icon_language;
fabric.Image.fromURL('images/Settings/language.gif', function(oImg) {
  oImg.set({left: 189, top: 925, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'settings_language';
  icon_language = oImg;
  ArrayOfObjects.push(icon_language);
  canvas.add(icon_language);
});

var LanguageText = new fabric.Text(LANGUAGE[syslang], {
  left: 84,
  top: 475,
  fontFamily: 'Times',
  fontSize: 15
});
  LanguageText.setColor('black');
  LanguageText.selectable = false;
  LanguageText.visible = false;
  ArrayOfObjects.push(LanguageText);

//********************************************************************************************


//********************************************************************************************
// SECOND COLUMN OF ITEMS
// Traffic
var icon_traffic;
fabric.Image.fromURL('images/Settings/traffic.gif', function(oImg) {
  oImg.set({left: 369, top: 735, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'settings_traffic';
  icon_traffic  = oImg;
  ArrayOfObjects.push(icon_traffic);
  canvas.add(icon_traffic);
});

var TrafficText = new fabric.Text(TRAFFIC[syslang], {
  left: 173,
  top: 389,
  fontFamily: 'Times',
  fontSize: 15
});
TrafficText.setColor('black');
TrafficText.selectable = false;
TrafficText.visible = false;
ArrayOfObjects.push(TrafficText);

// options
var traffic_option_work = new fabric.Rect({
  left: 165,
  top: 335,
  fill: 'grey',
  stroke: 'black',
  width: 180,
  height: 50,
  angle: 0
});
traffic_option_work.visible = false;
traffic_option_work.hasControls = traffic_option_work.hasBorders =  traffic_option_work.selectable = false;
traffic_option_work.lockMovementX = traffic_option_work.lockMovementY = true;
traffic_option_work.id = 'traffic_option_work';

fabric.util.loadImage('images/Settings/traffic_option_work.gif', function (img) {
  traffic_option_work.setPatternFill({
    source: img,
    repeat: 'no-repeat'
  });
});
ArrayOfObjects.push(traffic_option_work);

var traffic_option_barber = new fabric.Rect({
  left: 165,
  top: 390,
  fill: 'grey',
  stroke: 'black',
  width: 180,
  height: 50,
  angle: 0
});
traffic_option_barber.visible = false;
traffic_option_barber.hasControls = traffic_option_barber.hasBorders =  traffic_option_barber.selectable = false;
traffic_option_barber.lockMovementX = traffic_option_barber.lockMovementY = true;
traffic_option_barber.id = 'traffic_option_work';

fabric.util.loadImage('images/Settings/traffic_option_barber.gif', function (img) {
  traffic_option_barber.setPatternFill({
    source: img,
    repeat: 'no-repeat'
  });
});
ArrayOfObjects.push(traffic_option_barber);

var traffic_option_moms = new fabric.Rect({
  left: 165,
  top: 335,
  fill: 'grey',
  stroke: 'black',
  width: 180,
  height: 50,
  angle: 0
});
traffic_option_moms.visible = false;
traffic_option_moms.hasControls = traffic_option_moms.hasBorders =  traffic_option_moms.selectable = false;
traffic_option_moms.lockMovementX = traffic_option_moms.lockMovementY = true;
traffic_option_moms.id = 'traffic_option_moms';

fabric.util.loadImage('images/Settings/traffic_option_moms.gif', function (img) {
  traffic_option_moms.setPatternFill({
    source: img,
    repeat: 'no-repeat'
  });
});
ArrayOfObjects.push(traffic_option_moms);

user_traffic_options.push(traffic_option_moms);
user_traffic_options.push(traffic_option_work);
user_traffic_options.push(traffic_option_barber);

// Stars
var traffic_star1 = new fabric.Rect({
  left: 165,
  top: 335,
  fill: 'grey',
  stroke: 'black',
  width: 50,
  height: 45,
  angle: 0
});
traffic_star1.visible = false;
traffic_star1.hasControls = traffic_star1.hasBorders = false;
traffic_star1.lockMovementX = traffic_star1.lockMovementY = true;
traffic_star1.id = 'traffic_star1';

fabric.util.loadImage('images/Settings/traffic_star.gif', function (img) {
  traffic_star1.setPatternFill({
    source: img,
    repeat: 'no-repeat'
  });
});
ArrayOfObjects.push(traffic_star1);

var traffic_star2 = new fabric.Rect({
  left: 165,
  top: 430,
  fill: 'grey',
  stroke: 'black',
  width: 50,
  height: 45,
  angle: 0
});
traffic_star2.visible = false;
traffic_star2.hasControls = traffic_star2.hasBorders = false;
traffic_star2.lockMovementX = traffic_star2.lockMovementY = true;
traffic_star2.id = 'traffic_star2';

fabric.util.loadImage('images/Settings/traffic_star.gif', function (img) {
  traffic_star2.setPatternFill({
    source: img,
    repeat: 'no-repeat'
  });
});
ArrayOfObjects.push(traffic_star2);

stars.push(traffic_star1);
stars.push(traffic_star2);

var traffic_add_btn = new fabric.Rect({
  left: 165,
  top: 500,
  fill: 'white',
  stroke: 'black',
  width: 74,
  height: 51,
  angle: 0
});
traffic_add_btn.visible = false;
traffic_add_btn.hasControls = traffic_add_btn.hasBorders = false;
traffic_add_btn.lockMovementX = traffic_add_btn.lockMovementY = true;
traffic_add_btn.id = 'traffic_add_btn';

var traffic_add_btn_text = new fabric.IText('Add', {
  fontFamily: 'arial black',
  fontSize: 20,
  left: 170,
  top: 515,
  width: 100,
  height: 50
});
traffic_add_btn_text.visible = false;
traffic_add_btn_text.hasControls = traffic_add_btn_text.hasBorders = false;
traffic_add_btn_text.lockMovementX = traffic_add_btn_text.lockMovementY = true;
traffic_add_btn_text.id = 'traffic_add_btn_text';

ArrayOfObjects.push(traffic_add_btn);
ArrayOfObjects.push(traffic_add_btn_text);

var traffic_save_btn = new fabric.Rect({
  left: 165,
  top: 500,
  fill: 'white',
  stroke: 'black',
  width: 65,
  height: 46,
  angle: 0
});
traffic_save_btn.visible = false;
traffic_save_btn.hasControls = traffic_save_btn.hasBorders = false;
traffic_save_btn.lockMovementX = traffic_save_btn.lockMovementY = true;
traffic_save_btn.id = 'traffic_save_btn';

var traffic_save_btn_text = new fabric.IText('Save', {
  fontFamily: 'arial black',
  fontSize: 20,
  left: 165,
  top: 510 ,
  width: 100,
  height: 50
});
traffic_save_btn_text.visible = false;
traffic_save_btn_text.hasControls = traffic_save_btn_text.hasBorders = false;
traffic_save_btn_text.lockMovementX = traffic_save_btn_text.lockMovementY = true;
traffic_save_btn_text.id = 'traffic_save_btn_text';

ArrayOfObjects.push(traffic_save_btn);
ArrayOfObjects.push(traffic_save_btn_text);

var traffic_input_name = new fabric.Rect({
  left: 165,
  top: 330,
  fill: 'white',
  stroke: 'black',
  width: 250,
  height: 50,
  angle: 0
});
traffic_input_name.visible = false;
traffic_input_name.hasControls = traffic_input_name.hasBorders = traffic_input_name.selectable = false;
traffic_input_name.lockMovementX = traffic_input_name.lockMovementY = true;
traffic_input_name.id = 'traffic_input_name';

var traffic_input_name_text = new fabric.IText('Type your name...', {
  fontFamily: 'arial black',
  fontSize: 20,
  left: 170,
  top: 340 ,
  width: 100,
  height: 50
});
traffic_input_name_text.visible = false;
traffic_input_name_text.hasControls = traffic_input_name_text.hasBorders = traffic_input_name_text.selectable = false;
traffic_input_name_text.lockMovementX = traffic_input_name_text.lockMovementY = true;
traffic_input_name_text.id = 'traffic_input_name_text';

ArrayOfObjects.push(traffic_input_name);
ArrayOfObjects.push(traffic_input_name_text);

var traffic_input_address = new fabric.Rect({
  left: 165,
  top: 400,
  fill: 'white',
  stroke: 'black',
  width: 275,
  height: 75,
  angle: 0
});
traffic_input_address.visible = false;
traffic_input_address.hasControls = traffic_input_address.hasBorders = traffic_input_address.selectable = false;
traffic_input_address.lockMovementX = traffic_input_address.lockMovementY = true;
traffic_input_address.id = 'traffic_input_address';

var traffic_input_address_text = new fabric.IText('The address...', {
  fontFamily: 'arial black',
  fontSize: 20,
  left: 170,
  top: 410 ,
  width: 100,
  height: 50
});
traffic_input_address_text.visible = false;
traffic_input_address_text.hasControls = traffic_input_address_text.hasBorders = traffic_input_address_text.selectable = false;
traffic_input_address_text.lockMovementX = traffic_input_address_text.lockMovementY = true;
traffic_input_address_text.id = 'traffic_input_address_text';

ArrayOfObjects.push(traffic_input_address);
ArrayOfObjects.push(traffic_input_address_text);

// DATE/TIME
var icon_datetime;
fabric.Image.fromURL('images/Settings/datetime.gif', function(oImg) {
  oImg.set({left: 369, top: 920, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'settings_datetime';
  icon_datetime = oImg;
  ArrayOfObjects.push(icon_datetime);
  canvas.add(oImg);
});

var DatetimeText = new fabric.Text(DATE_TIME[syslang], {
  left: 160,
  top: 475,
  fontFamily: 'Times',
  fontSize: 15
});
DatetimeText.setColor('black');
DatetimeText.selectable = false;
DatetimeText.visible = false;
ArrayOfObjects.push(DatetimeText);


//********************************************************************************************
// THIRD COLUMN OF ITEMS
// Doorbell
var icon_doorbell;
fabric.Image.fromURL('images/Settings/doorbell.gif', function(oImg) {
  oImg.set({left: 549, top: 720, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'settings_doorbell';
  icon_doorbell = oImg;
  ArrayOfObjects.push(icon_doorbell);
  canvas.add(icon_doorbell);
});

var DoorbellText = new fabric.Text(DOORBELL[syslang], {
  left: 255,
  top: 385,
  fontFamily: 'Times',
  fontSize: 15
});
DoorbellText.setColor('black');
DoorbellText.selectable = false;
DoorbellText.visible = false;
ArrayOfObjects.push(DoorbellText);

// Units
var icon_units;
fabric.Image.fromURL('images/Settings/metric.gif', function(oImg) {
  oImg.set({left: 549, top: 920, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'settings_units';
  icon_units = oImg;
  ArrayOfObjects.push(icon_units);
  canvas.add(icon_units);
});

var UnitsText = new fabric.Text(UNITS[syslang], {
  left: 255,
  top: 475,
  fontFamily: 'Times',
  fontSize: 15
});
UnitsText.setColor('black');
UnitsText.selectable = false;
UnitsText.visible = false;
ArrayOfObjects.push(UnitsText);
//********************************************************************************************

//********************************************************************************************
// FOURTH COLUMN OF ITEMS
// Brightness
var icon_brightness;
fabric.Image.fromURL('images/Settings/brightness.gif', function(oImg) {
  oImg.set({left: 729, top: 720, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'settings_brightness';
  icon_brightness = oImg;
  ArrayOfObjects.push(icon_brightness);
  canvas.add(icon_brightness);
});

var BrightnessText = new fabric.Text(BRIGHTNESS[syslang], {
  left: 330,
  top: 385,
  fontFamily: 'Times',
  fontSize: 15
});
BrightnessText.setColor('black');
BrightnessText.selectable = false;
BrightnessText.visible = false;
ArrayOfObjects.push(BrightnessText);

// Volume
var icon_volume;
fabric.Image.fromURL('images/Settings/volume.gif', function(oImg) {
  oImg.set({left: 729, top: 935, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'settings_volume';
  icon_volume = oImg;
  ArrayOfObjects.push(icon_volume);
  canvas.add(icon_volume);
});

var VolumeText = new fabric.Text(VOLUME[syslang], {
  left: 332,
  top: 477,
  fontFamily: 'Times',
  fontSize: 15
});
VolumeText.setColor('black');
VolumeText.selectable = false;
VolumeText.visible = false;
ArrayOfObjects.push(VolumeText);
//********************************************************************************************


//********************************************************************************************
// FIFTH COLUMN OF ITEMS
// Themes
var icon_themes;
fabric.Image.fromURL('images/Settings/themes.gif', function(oImg) {
  oImg.set({left: 909, top: 730, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'settings_themes';
  icon_themes = oImg;
  ArrayOfObjects.push(icon_themes);
  canvas.add(icon_themes);
});

var ThemesText = new fabric.Text(THEME[syslang], {
  left: 420,
  top: 388,
  fontFamily: 'Times',
  fontSize: 15
});
ThemesText.setColor('black');
ThemesText.selectable = false;
ThemesText.visible = false;
ArrayOfObjects.push(ThemesText);

// Intercom
var icon_intercom;
fabric.Image.fromURL('images/Settings/tutorial.gif', function(oImg) {
  oImg.set({left: 909, top: 930, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'settings_intercom';
  icon_intercom = oImg;
  ArrayOfObjects.push(icon_intercom);
  canvas.add(icon_intercom);
});

var IntercomText = new fabric.Text(INTERCOM[syslang], {
  left: 415,
  top: 475,
  fontFamily: 'Times',
  fontSize: 15
});
IntercomText.setColor('black');
IntercomText.selectable = false;
IntercomText.visible = false;
ArrayOfObjects.push(IntercomText);
//********************************************************************************************

// BRIGHTNESSSSS

var brightness_text = new fabric.IText('Brightness', {
  fontFamily: 'arial black',
  fontSize: 20,
  left: 200,
  top: 310,
  width: 100,
  height: 50
});
brightness_text.visible = false;
brightness_text.hasControls = brightness_text.hasBorders = brightness_text.selectable = false;
brightness_text.lockMovementX = brightness_text.lockMovementY = true;
brightness_text.id = 'brightness_text';

ArrayOfObjects.push(brightness_text);

var slider_back = new fabric.Rect({
  left: 165,
  top: 430,
  fill: 'grey',
  stroke: 'black',
  width: 213,
  height: 14,
  angle: 0
});
slider_back.visible = false;
slider_back.hasControls = slider_back.hasBorders = false;
slider_back.lockMovementX = slider_back.lockMovementY = true;
slider_back.id = 'slider_back';

fabric.util.loadImage('images/Settings/slider_back.gif', function (img) {
  slider_back.setPatternFill({
    source: img,
    repeat: 'no-repeat'
  });
});
ArrayOfObjects.push(slider_back);

var slider = new fabric.Rect({
  left: 245,
  top: 430,
  fill: 'grey',
  stroke: 'black',
  width: 37,
  height: 38,
  angle: 0
});
slider.visible = false;
slider.hasControls = slider.hasBorders = false;
slider.lockMovementY = true;
slider.id = 'slider_back';

fabric.util.loadImage('images/Settings/slider.gif', function (img) {
  slider.setPatternFill({
    source: img,
    repeat: 'no-repeat'
  });
});
ArrayOfObjects.push(slider);

var display_text = new fabric.IText('Display Timer', {
  fontFamily: 'arial black',
  fontSize: 20,
  left: 200,
  top: 480,
  width: 100,
  height: 50
});
display_text.visible = false;
display_text.hasControls = display_text.hasBorders = display_text.selectable = false;
display_text.lockMovementX = display_text.lockMovementY = true;
display_text.id = 'brightness_text';

ArrayOfObjects.push(display_text);

var one_min_btn = new fabric.Rect({
  left: 165,
  top: 500,
  fill: 'white',
  stroke: 'black',
  width: 60,
  height: 50,
  angle: 0
});
one_min_btn.visible = false;
one_min_btn.hasControls = one_min_btn.hasBorders = false;
one_min_btn.lockMovementX = one_min_btn.lockMovementY = true;
one_min_btn.id = 'one_min_btn';

var one_min_btn_text = new fabric.IText('1 min', {
  fontFamily: 'arial black',
  fontSize: 20,
  left: 170,
  top: 515,
  width: 60,
  height: 50
});
one_min_btn_text.visible = false;
one_min_btn_text.hasControls = one_min_btn_text.hasBorders = false;
one_min_btn_text.lockMovementX = one_min_btn_text.lockMovementY = true;
one_min_btn_text.id = 'one_min_btn_text';

ArrayOfObjects.push(one_min_btn_text);
ArrayOfObjects.push(one_min_btn);

var three_min_btn = new fabric.Rect({
  left: 210,
  top: 500,
  fill: 'white',
  stroke: 'blue',
  width: 60,
  height: 50,
  angle: 0
});
three_min_btn.visible = false;
three_min_btn.hasControls = three_min_btn.hasBorders = false;
three_min_btn.lockMovementX = three_min_btn.lockMovementY = true;
three_min_btn.id = 'three_min_btn';

var three_min_btn_text = new fabric.IText('3 min', {
  fontFamily: 'arial black',
  fontSize: 20,
  left: 210,
  top: 500,
  width: 60,
  height: 50
});
three_min_btn_text.visible = false;
three_min_btn_text.hasControls = three_min_btn_text.hasBorders = false;
three_min_btn_text.lockMovementX = three_min_btn_text.lockMovementY = true;
three_min_btn_text.id = 'three_min_btn_text';

ArrayOfObjects.push(three_min_btn_text);
ArrayOfObjects.push(three_min_btn);

var five_min_btn = new fabric.Rect({
  left: 270,
  top: 500,
  fill: 'white',
  stroke: 'black',
  width: 60,
  height: 50,
  angle: 0
});
five_min_btn.visible = false;
five_min_btn.hasControls = five_min_btn.hasBorders = false;
five_min_btn.lockMovementX = five_min_btn.lockMovementY = true;
five_min_btn.id = 'five_min_btn';

var five_min_btn_text = new fabric.IText('5 min', {
  fontFamily: 'arial black',
  fontSize: 20,
  left: 270,
  top: 515,
  width: 60,
  height: 50
});
five_min_btn_text.visible = false;
five_min_btn_text.hasControls = five_min_btn_text.hasBorders = false;
five_min_btn_text.lockMovementX = five_min_btn_text.lockMovementY = true;
five_min_btn_text.id = 'five_min_btn_text';

ArrayOfObjects.push(five_min_btn);
ArrayOfObjects.push(five_min_btn_text);

var brightness_save_btn = new fabric.Rect({
  left: 300,
  top: 550,
  fill: 'white',
  stroke: 'black',
  width: 65,
  height: 46,
  angle: 0
});
brightness_save_btn.visible = false;
brightness_save_btn.hasControls = brightness_save_btn.hasBorders = false;
brightness_save_btn.lockMovementX = brightness_save_btn.lockMovementY = true;
brightness_save_btn.id = 'brightness_save_btn';

var brightness_save_btn_text = new fabric.IText('Save', {
  fontFamily: 'arial black',
  fontSize: 20,
  left: 165,
  top: 550 ,
  width: 65,
  height: 46
});
brightness_save_btn_text.visible = false;
brightness_save_btn_text.hasControls = brightness_save_btn_text.hasBorders = false;
brightness_save_btn_text.lockMovementX = brightness_save_btn_text.lockMovementY = true;
brightness_save_btn_text.id = 'brightness_save_btn_text';

ArrayOfObjects.push(brightness_save_btn_text);
ArrayOfObjects.push(brightness_save_btn);

//********************************************************************************************

var icon_restart;
fabric.Image.fromURL('images/restart.png', function(oImg) {
  oImg.set({left: 550, top: 1150, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'restart';
  icon_restart = oImg;
  ArrayOfObjects.push(icon_restart);
  canvas.add(icon_restart);
});

fabric.Image.fromURL('images/alarmOn.gif', function(oImg) {
  oImg.set({left: 549, top: 920, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'alarmOn';
  ArrayOfObjects.push(oImg);
  canvas.add(oImg);

});

//----------------------- Camera Components ---------------------------
var AvatarOut = new fabric.Rect({
  left: 830,
  top: 250,
  //fill: 'grey',
  stroke: 'black',
  width: 200,
  height: 200,
  angle: 0
});
AvatarOut.visible = false;
AvatarOut.hasControls = AvatarOut.hasBorders = AvatarOut.selectable = false;
AvatarOut.lockMovementX = AvatarOut.lockMovementY = true;

fabric.util.loadImage('images/AvatarOnOut.gif', function (img) {
  AvatarOut.setPatternFill({
    source: img,
    repeat: 'repeat'
  });
});
ArrayOfObjects.push(AvatarOut);

var CameraIn = new fabric.Rect({
  left: 100,
  top: 320,
  stroke: 'black',
  width: 100,
  height: 100,
  angle: 0
});
CameraIn.visible = false;
CameraIn.hasControls = CameraIn.hasBorders = CameraIn.selectable = false;
CameraIn.lockMovementX = CameraIn.lockMovementY = true;

fabric.util.loadImage('images/AvatarIn.gif', function (img) {
  CameraIn.setPatternFill({
    source: img,
    repeat: 'repeat'
  });
});
ArrayOfObjects.push(CameraIn);

AvatarOnOff = new fabric.Rect({
  left: 210,
  top: 320,
  stroke: 'black',
  width: 40,
  height: 40,
  angle: 0
});
AvatarOnOff.visible = false;
AvatarOnOff.hasControls = AvatarOnOff.hasBorders = false;
AvatarOnOff.lockMovementX = AvatarOnOff.lockMovementY = true;

fabric.util.loadImage('images/AvatarOn.gif', function (img) {
  AvatarOnOff.setPatternFill({
    source: img,
    repeat: 'repeat'
  });
});
ArrayOfObjects.push(AvatarOnOff);

LiveOnOff = new fabric.Rect({
  left: 210,
  top: 380,
  stroke: 'black',
  width: 40,
  height: 40,
  angle: 0
});
LiveOnOff.visible = false;
LiveOnOff.hasControls = LiveOnOff.hasBorders = false;
LiveOnOff.lockMovementX = LiveOnOff.lockMovementY = true;

fabric.util.loadImage('images/LiveOn.gif', function (img) {
  LiveOnOff.setPatternFill({
    source: img,
    repeat: 'repeat'
  });
});
ArrayOfObjects.push(LiveOnOff);
//------------------------------------------------------------------
var icon_doorbell;
fabric.Image.fromURL('images/doorbell.gif', function(oImg) {
  oImg.set({left: 1485, top: 680, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'doorbell';
  icon_doorbell = oImg;
  canvas.add(oImg);
});

var icon_write_messages;
fabric.Image.fromURL('images/writemsg.gif', function(oImg) {
  oImg.set({left: 1470, top: 790, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'writemsg';
  icon_write_messages = oImg;
  canvas.add(icon_write_messages);
});

var icon_number_pad;
fabric.Image.fromURL('images/numberpad.gif', function(oImg) {
  oImg.set({left: 1480, top: 860, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'np';
  icon_number_pad = oImg;
  canvas.add(icon_number_pad);
});

//------------------------------- Themes components --------------------------------
//----------------------------------------------------------------------------------
var ActiveSide = "Inside";

var InsideText = new fabric.Text("Inside", {
  left: 180,
  top: 330,
  fontFamily: 'Times',
  fontSize: 25,
  opacity: 1
});
InsideText.setColor('black');
InsideText.selectable = true;
InsideText.visible = false;
InsideText.hasControls = InsideText.hasBorders = false;
InsideText.lockMovementX = InsideText.lockMovementY = true;
ArrayOfObjects.push(InsideText);


var OutsideText = new fabric.Text("Outside", {
  left: 310,
  top: 330,
  fontFamily: 'Times',
  fontSize: 25,
  opacity: 0.3
});
OutsideText.setColor('black');
OutsideText.selectable = true;
OutsideText.visible = false;
OutsideText.hasControls = OutsideText.hasBorders = false;
OutsideText.lockMovementX = OutsideText.lockMovementY = true;
ArrayOfObjects.push(OutsideText);

var ThemesDroplist = new fabric.Text('  Themes         ', {
  backgroundColor: 'lightgrey',
  borderColor: 'black',
  fontFamily: 'Times',
  fontSize: 23,
  padding: 5,
  left: 135,
  top: 365 ,
  width: 150,
  height: 50
});
ThemesDroplist.selectable = true;
ThemesDroplist.visible = false;
ThemesDroplist.hasBorders = true;
ThemesDroplist.hasControls =  false;
ThemesDroplist.lockMovementX = ThemesDroplist.lockMovementY = true;
ArrayOfObjects.push(ThemesDroplist);


var OrnamentDroplist = new fabric.Text('  Ornaments    ', {
  backgroundColor: 'lightgrey',
  borderColor: 'black',
  fontFamily: 'Times',
  fontSize: 23,
  padding: 5,
  left: 285,
  top: 365 ,
  width: 150,
  height: 50
});
OrnamentDroplist.selectable = true;
OrnamentDroplist.visible = false;
OrnamentDroplist.hasBorders = true;
OrnamentDroplist.hasControls =  false;
ThemesDroplist.lockMovementX = OrnamentDroplist.lockMovementY = true;
ArrayOfObjects.push(OrnamentDroplist);


var WoodText = new fabric.Text('  Wood            ', {
  backgroundColor: 'white',
  fontFamily: 'Times',
  fontSize: 23,
  padding: 5,
  left: 135,
  top: 400 ,
  width: 150,
  height: 50
});
WoodText.selectable = true;
WoodText.visible = false;
WoodText.hasBorders = false;
WoodText.hasControls =  false;
WoodText.lockMovementX = WoodText.lockMovementY = true;
ArrayOfObjects.push(WoodText);

var MetalText = new fabric.Text('  Metal            ', {
  backgroundColor: 'white',
  fontFamily: 'Times',
  fontSize: 23,
  padding: 5,
  left: 135,
  top: 430 ,
  width: 150,
  height: 50
});
MetalText.selectable = true;
MetalText.visible = false;
MetalText.hasBorders = false;
MetalText.hasControls =  false;
MetalText.lockMovementX = MetalText.lockMovementY = true;
ArrayOfObjects.push(MetalText);

var XmassText = new fabric.Text('  Xmass           ', {
  backgroundColor: 'white',
  fontFamily: 'Times',
  fontSize: 23,
  padding: 5,
  left: 285,
  top: 400 ,
  width: 150,
  height: 50
});
XmassText.selectable = true;
XmassText.visible = false;
XmassText.hasBorders = false;
XmassText.hasControls =  false;
XmassText.lockMovementX = XmassText.lockMovementY = true;
ArrayOfObjects.push(XmassText);

var EasterText = new fabric.Text('  Easter            ', {
  backgroundColor: 'white',
  fontFamily: 'Times',
  fontSize: 23,
  padding: 5,
  left: 285,
  top: 430 ,
  width: 150,
  height: 50
});
EasterText.selectable = true;
EasterText.visible = false;
EasterText.hasBorders = false;
EasterText.hasControls =  false;
EasterText.lockMovementX = EasterText.lockMovementY = true;
ArrayOfObjects.push(EasterText);

var ResetTheme = new fabric.Text('  Reset  ', {
  backgroundColor: 'lightgrey',
  fontFamily: 'Times',
  fontSize: 23,
  padding: 5,
  left: 235,
  top: 470 ,
  width: 150,
  height: 50
});
ResetTheme.selectable = true;
ResetTheme.visible = false;
ResetTheme.hasBorders = false;
ResetTheme.hasControls =  false;
ResetTheme.lockMovementX = ResetTheme.lockMovementY = true;
ArrayOfObjects.push(ResetTheme);

var EasterOrn;
fabric.Image.fromURL('images/easter.gif', function(oImg) {
  oImg.set({left: 1750, top: 100, id: this.id});
  oImg.visible = false;
  oImg.scale(1.1);
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'easter';
  EasterOrn = oImg;
  canvas.add(EasterOrn);
});

var XmassOrn;
fabric.Image.fromURL('images/xmass.gif', function(oImg) {
  oImg.set({left: 1750, top: 100, id: this.id});
  oImg.visible = false;
  oImg.scale(1.1);
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'easter';
  XmassOrn = oImg;
  canvas.add(XmassOrn);
});

//---------------------- theme function -----------------------
function ShowThemeSettings()
{
  InsideText.visible = true;
  OutsideText.visible = true;
  ThemesDroplist.visible = true;
  OrnamentDroplist.visible = true;
  WoodText.visible = true;
  MetalText.visible = true;
  XmassText.visible = true;
  EasterText.visible = true;
  ResetTheme.visible = true;
  WoodText.backgroundColor = 'white';
  MetalText.backgroundColor = 'white';
  XmassText.backgroundColor = 'white';
  EasterText.backgroundColor = 'white';
}

function CloseThemeSettings()
{
  InsideText.visible = false;
  OutsideText.visible = false;
  ThemesDroplist.visible = false;
  OrnamentDroplist.visible = false;
  WoodText.visible = false;
  MetalText.visible = false;
  XmassText.visible = false;
  EasterText.visible = false;
  ResetTheme.visible = false;
}

InsideText.on('mousedown', function ()
{
  WoodText.backgroundColor = 'white';
  MetalText.backgroundColor = 'white';
  XmassText.backgroundColor = 'white';
  EasterText.backgroundColor = 'white';
  InsideText.setOpacity(1);
  OutsideText.setOpacity(0.3);
  ActiveSide = "Inside";
});

OutsideText.on('mousedown', function ()
{
  WoodText.backgroundColor = 'white';
  MetalText.backgroundColor = 'white';
  XmassText.backgroundColor = 'white';
  EasterText.backgroundColor = 'white';
  InsideText.setOpacity(0.3);
  OutsideText.setOpacity(1);
  ActiveSide = "Outside";
});
//------------
WoodText.on('mousedown', function ()
{
  MetalText.backgroundColor = 'white';
  WoodText.backgroundColor = '#85C1E9';

  if(ActiveSide == "Inside")
    {
      In_theme = 'Wood';
      CURRENT_USER.in_theme = In_theme;
      fabric.util.loadImage('images/wooddoor.jpg', function (img) {
      img.id = 'Wood';
      insideDoor.setPatternFill({
      source: img,
      repeat: 'repeat'
      }); });
    }

  else if(ActiveSide == "Outside")
    {
      Out_theme = 'Wood';
      CURRENT_USER.out_theme = Out_theme;
      fabric.util.loadImage('images/wooddoor.jpg', function (img) {
      img.id = 'Wood';
      outsideDoor.setPatternFill({
      source: img,
      repeat: 'repeat'
      }); });
    }
});

//------------
MetalText.on('mousedown', function ()
{
  MetalText.backgroundColor = '#85C1E9';
  WoodText.backgroundColor = 'white';
  if(ActiveSide == "Inside")
  {
    In_theme = 'Metal';
    CURRENT_USER.in_theme = In_theme;
    fabric.util.loadImage('images/metal.jpg', function (img) {
    img.id = 'Metal';
    insideDoor.setPatternFill({
    source: img,
    repeat: 'repeat'
    }); });
  }

  else if(ActiveSide == "Outside")
  {
     Out_theme = 'Metal';
     CURRENT_USER.out_theme = Out_theme;
     fabric.util.loadImage('images/metal.jpg', function (img) {
     img.id = 'Metal';
     outsideDoor.setPatternFill({
     source: img,
     repeat: 'repeat'
     }); });
   }

});
//----------------
XmassText.on('mousedown', function ()
{
  CURRENT_USER.out_ornament = 'Xmass';
  XmassText.backgroundColor = '#85C1E9';
  EasterText.backgroundColor = 'white';
  XmassOrn.visible = true;
  EasterOrn.visible = false;
});

EasterText.on('mousedown', function ()
{
  CURRENT_USER.out_ornament = 'Easter';
  XmassText.backgroundColor = 'white';
  EasterText.backgroundColor = '#85C1E9';
  XmassOrn.visible = false;
  EasterOrn.visible = true;
});
//----------
ResetTheme.on('mousedown', function ()
{
  In_theme = 'default';
  Out_theme = 'default';
  CURRENT_USER.out_theme = Out_theme;
  CURRENT_USER.in_theme = In_theme;
  XmassOrn.visible = false;
  EasterOrn.visible = false;

fabric.util.loadImage('images/Doorpattern.gif', function (img) {
    insideDoor.setPatternFill({
    source: img,
    repeat: 'repeat'
    });});

fabric.util.loadImage('images/DoorpatternOut.gif', function (img) {
    outsideDoor.setPatternFill({
    source: img,
    repeat: 'repeat'
    });});
});

//********************************************************************************************
function init_traffic_stuff() {


}


//********************************************************************************************

// add all of the elements to the canvas

canvas.add(insideDoor);
canvas.add(outsideDoor);
canvas.add(date_rect);
canvas.add(Mirror);
canvas.add(Traffic);
canvas.add(Transport);
canvas.add(News);
canvas.add(Weathertext);
canvas.add(Deadbolttext);
canvas.add(Line);
canvas.add(PanelRect);
canvas.add(Messagestext);
canvas.add(Cameratext);
canvas.add(Traffictext);
canvas.add(Transporttext);
canvas.add(Newstext);
canvas.add(Mirrortext);
canvas.add(Lightstext);
canvas.add(Alarmtext);
canvas.add(Emergtext);
canvas.add(Settingstext);

canvas.add(Lights);
canvas.add(AvatarOut);
canvas.add(CameraIn);
canvas.add(AvatarOnOff);
canvas.add(LiveOnOff);


canvas.add(UsersText);
canvas.add(LanguageText);
canvas.add(TrafficText);
canvas.add(DatetimeText);
canvas.add(DoorbellText);
canvas.add(UnitsText);
canvas.add(BrightnessText);
canvas.add(VolumeText);
canvas.add(ThemesText);
canvas.add(IntercomText);
canvas.add(UserPanel);
canvas.add(sendKey);
canvas.add(input_sendKey);
canvas.add(post_sendKey);
canvas.add(traffic_option_work);
canvas.add(traffic_option_barber);
canvas.add(traffic_option_moms);
canvas.add(traffic_add_btn);
canvas.add(traffic_save_btn);
canvas.add(traffic_input_name);
canvas.add(traffic_input_name_text);
canvas.add(traffic_input_address);
canvas.add(traffic_input_address_text);
canvas.add(traffic_add_btn_text);
canvas.add(traffic_save_btn_text);
canvas.add(traffic_star2);
canvas.add(traffic_star1);

canvas.add(brightness_text);
canvas.add(slider_back);
canvas.add(slider);
canvas.add(display_text);
canvas.add(one_min_btn);
canvas.add(one_min_btn_text);
canvas.add(three_min_btn);
canvas.add(three_min_btn_text);
canvas.add(five_min_btn);
canvas.add(five_min_btn_text);
canvas.add(brightness_save_btn);
canvas.add(brightness_save_btn_text);


//For themes texts and components
canvas.add(InsideText);
canvas.add(OutsideText);
canvas.add(ThemesDroplist);
canvas.add(OrnamentDroplist);
canvas.add(WoodText);
canvas.add(MetalText);
canvas.add(XmassText);
canvas.add(EasterText);
canvas.add(ResetTheme);

//************************************** Functions *******************************************
canvas.on('object:selected', function(e) {
  var activeObject = e.target;

  //console.log(e.target);
  if(activeObject.id == 'home'){
    HomeSelected();
    canvas.deactivateAll();
    CURRENT_USER.hideObjects();
  }
  else if(activeObject.id == 'LockKnobIn')
    UnlockDoorIn();

  else if(activeObject.id == 'UnlockKnobIn')
    LockDoorIn();

  else if(activeObject.id == 'LockKnobOut') {
    if(UserFingerIsRecognizable == true)
    UnlockDoorOut();
  }

  else if(activeObject.id == 'UnlockKnobOut')
    LockDoorOut();

  else if(activeObject.id == 'LockDeadbolt')
     UnlockDeadbolt();

  else if(activeObject.id == 'UnlockDeadbolt')
     LockDeadbolt();

  else if(activeObject.id == 'restart')
     RestartSystem();

  else if(activeObject.id == 'alarmOn')
     AlarmOff();

  else if(activeObject.id == 'alarm')
      AlarmOn();

  else if(activeObject.id == 'user1name')
     {HideUsersList(); User1FromInside();}

  else if(activeObject.id == 'user2name')
     {HideUsersList(); User2FromInside();}

  else if (activeObject.id == "doorbell")
    playDoorbellSound();
  else if (activeObject.id == "settings") {
    showSettings();
    canvas.deactivateAll();
  }
  else if (activeObject.id == "settings_traffic")
    showTrafficSettings();
  else if (activeObject.id == "traffic_add_btn" || activeObject.id == "traffic_add_btn_text")
    showTrafficInputAdd();
  else if (activeObject.id == "traffic_save_btn" || activeObject.id == "traffic_save_btn_text")
    saveTrafficOption();
  else if(activeObject.id == "traffic_star1" || activeObject.id == "traffic_star2")
    toggleTrafficPrimary(activeObject.id);

  else if (activeObject.id == "settings_themes")
  {
    hideSettings();
    ShowThemeSettings();
  }
  else if (activeObject.id == "settings_brightness")
    hideSettings();
    showBrightnessSettings();

  if(activeObject.id == 'mirror')
    {
      MirrorSelected();
      canvas.deactivateAll();
    }
  if(activeObject.id == 'traffic')
    {
      TrafficSelected();
      canvas.deactivateAll();
    }
  if(activeObject.id == 'lights')
    {
      LightsSelected();
      canvas.deactivateAll();
    }
  if(activeObject.id == 'cta')
    {
      TransportSelected();
      canvas.deactivateAll();
    }
  if(activeObject.id == 'news')
    {
      NewsSelected();
      canvas.deactivateAll();
    }

  if(activeObject.id == 'camera')
  {
    RunCamera();
    //canvas.deactivateAll();
  }

  if(activeObject.id == "settings_users") {
    usersSelected();
    canvas.deactivateAll();
  }
});

AvatarOnOff.on('selected', function(){
  if (AvatarIsActive == true)
    RunInsideCameraLive();
  else
    RunInsideCameraAvatar();
});

LiveOnOff.on('selected', function(){
  if (AvatarIsActive == true)
    RunInsideCameraLive();
  else
    RunInsideCameraAvatar();
});


//********************************************************************************************


// code adapted from http://jsfiddle.net/tornado1979/39up3jcm/
// this code deals with scaling all the elements on the canvas

function zoomAll(SCALE_FACTOR) {
  var objects = canvas.getObjects();
  for (var i in objects) {
    var scaleX = objects[i].scaleX;
    var scaleY = objects[i].scaleY;
    var left = objects[i].left;
    var top = objects[i].top;

    var tempScaleX = scaleX * SCALE_FACTOR;
    var tempScaleY = scaleY * SCALE_FACTOR;
    var tempLeft = left * SCALE_FACTOR;
    var tempTop = top * SCALE_FACTOR;

    objects[i].scaleX = tempScaleX;
    objects[i].scaleY = tempScaleY;
    objects[i].left = tempLeft;
    objects[i].top = tempTop;

    objects[i].setCoords();
  }
  canvas.renderAll();
}

// draw everything at the appropriate scale for this canvas
zoomAll(canvas.height / localHeight);




//})();

</script>

</head>

</html>