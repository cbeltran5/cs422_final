<!-- template for Project 1 - CS 422 - Spring 2016 - Andrew Johnson -->

<!DOCTYPE html>  
<html>
<head>
    <meta charset="utf-8">
    <title>fabric.js project template</title>
    
    <style>
code {
  background: #1D5F9A;
  border-radius: 6px;
  color: #fff;
  display: block;
  font: 44px/64px "Source Code Pro", Inconsolata, "Calibri", Terminal, "Calibri", Courier;
  padding: 24px 15px;
  text-align: left;
}
header,
section,
aside,
footer {
  margin: 1% 20px;
}
section {
  float: left;
  width: auto;
  height: auto;
}
aside {
  
  float: left;
  width: auto;
  height: auto;
}
footer {
  clear: both;
  margin-bottom: 0;
}

.radio1 {
    width: 40px;
    height: 40px;
    }

</style>
    
    <!-- ADD SOURCE FILES HERE! -->
	<!-- Get version 1.5.0 of Fabric.js from CDN -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.5.0/fabric.min.js" ></script>
    <script src="enrique.js"></script>
    <script src="gabe.js"></script>
    <script src="abeer.js"></script>

	 
<body>
		<!-- canvas tag for Fabric.js to draw into -->
    <!-- set this to some appropriate size for your development work -->
    <!-- but keep the same aspect ratio -->
    <!-- we will use width="2714" height="2200" for presentations and evaluation -->
		<!-- <canvas id="c" width="494" height="400" style="border:2px solid black;" ></canvas> -->
    <canvas id="c" width="2714" height="2200" style="border:2px solid black;" ></canvas>
    <section>
    <h1>Inside Events</h1>

    <code> 
      <section>
      <code><form>
      Users:<br>
      <input type="radio" class="radio1" name="UsersIn" onchange="User1FromInside()" value="Adam"> Adam<br>
      <input type="radio" class="radio1" name="UsersIn" onchange="User2FromInside()" value="Sara"> Sara<br>
      <input type="radio" class="radio1" name="UsersIn" onchange="MultiUsersFromInside()" value="MultiUser"> Multi Users<br>
      <input type="radio" class="radio1" name="UsersIn" onchange="NewUserFromInside()" value="NewUser"> New User<br>
      <input type="radio" class="radio1" name="UsersIn" onchange="NoUserFromInside()" value="NoSignal" checked> No Signal<br>

      </form></code>
      </section>

      <section>
      <code><form name="Heights">
      Heights:<br>
      <input type="radio" class="radio1" name="Heights" onchange="AdjustHeight()" value="Tall"> Tall<br>
      <input type="radio" class="radio1" name="Heights" onchange="AdjustHeight()" value="Medium"> Medium<br>
      <input type="radio" class="radio1" name="Heights" onchange="AdjustHeight()" value="Short"> Short<br>
      </form></code> 
      </section>

<section></section><section></section>
<section></section><section></section>
<section></section><section></section>
<section></section><section></section>
<section></section><section></section>
<section></section><section></section>
<section></section><section></section>
<section></section><section></section>
<section></section><section></section>


      </code>


    </section>

    <section>
    <h1>Outside Events</h1>

    <code> 


      <section>
      <code><form name="UsersOutside">
      Users:<br>
      <input type="radio" class="radio1" name="UsersOut" onchange="User1FromOutside()" value="Adam"> Adam<br>
      <input type="radio" class="radio1" name="UsersOut" onchange="NewUserFromOutside()" value="NewUser"> New User<br>
      <input type="radio" class="radio1" name="UsersOut" onchange="NoUserFromOutside()" value="NoSignal" checked> No Signal<br>

      </form></code>
      </section>

      <section>
      <code><form name="Verification">
      Verification:<br>
      <input type="radio" class="radio1" name="Verification" onchange="FaceRecognized()" value="Face"> Face<br>
      <input type="radio" class="radio1" name="Verification" onchange="FingerRecognized()" value="FingerPrint"> FingerPrint<br>
      <input type="radio" class="radio1" name="Verification" onchange="FailedVerification()" value="None" checked> None<br>
      </form></code> 
      </section>


      </code>

    </section>
</body>
 

<script>

// the aspect ratios given here are not quite tall enough for a 36" x 80" door
// we are assuming bottom 15 inches of the door are not part of the display. 
// that part contains lots of necessary electronics so the bottom of the door
// sits off the bottom of our display wall. You are implementing the interface
// for the top 65" of the display / door

//(function() {

// within the code below I assume I am drawing into a 1220x990 box
// then I can scale the group to whatever size the final canvas is
  var localHeight = 990;
  var localWidth = 1220;

  //var checkedRB = $('input[type="radio"][name="layout"]:checked');

  var canvas = this.__canvas = new fabric.Canvas('c');

  // set background to blue to make it easier to see it
  canvas.backgroundColor = "#DDDDDD";  // light grey

//****************************** System Settings Parameters *********************************

// syslang is an index into an array that represents a word in a language.
// ENGLISH = 0, SPANISH = 1, etc
var syslang = ENGLISH; // set to english by default
var System_language = SYSTEM_LANGUAGE[syslang];

// width for both doors
var doorwidth = 555;
// value for left side of rect object representing door, relative to the canvas
var inside_left = 22;
var outside_left = 642;

  
var In_theme = 'default';
var In_ornament = 'default';
var Out_theme = 'default';
var Out_ornament = 'default';

var Date_format = 1; 
var Time_format = 1;
var Units_format = 'Imperial';
  
var HomeIsActive = false;
var Current_user = null;
var UserFingerIsRecognizable = false;
var Height = 0;
var ImgHeight = Height*2.22222222;  
var RestartIsActive = false;
var AvatarIsActive = false;

  


//*******************************************************************************************

//************************************ Users Profiles ***************************************

var User1 = new User('Adam', ENGLISH);
var User2 = new User('Sara', SPANISH);

//  
//var User1 = {
//  name : 'Adam',
//  language : ENGLISH,
//
//  in_theme : 'wood',  
//  out_theme : 'wood',
//  in_ornament : 'default',
//  out_ornament : 'default',
//
//  date_format : 1,
//  time_format : 1,
//  units_format : 'Imperial'
//
//};

//var User2 = {
//  name : 'Sara',
//  language : SPANISH,
//
//  in_theme : 'metal',
//  out_theme : 'metal',
//  in_ornament : 'default',
//  out_ornament : 'default',
//
//  date_format : 1,
//  time_format : 1,
//  units_format : 'Imperial'
//
//};
//*******************************************************************************************


// need 36 wide instead of 40 as now
//*************************** Inside & Outside door initialization **************************

var insideDoor = new fabric.Rect({
  left: inside_left,
  top: 0,
  fill: 'grey',
  stroke: 'black',
  width: doorwidth,
  height: localHeight,
  angle: 0
});

// the doors will not be selectable or movable
insideDoor.hasControls = insideDoor.hasBorders = insideDoor.selectable = false;
insideDoor.lockMovementX = insideDoor.lockMovementY = true;
// Default door pattern
fabric.util.loadImage('images/Doorpattern.gif', function (img) {
    insideDoor.setPatternFill({
        source: img,
        repeat: 'repeat'
    });
    canvas.renderAll();
});

var outsideDoor = new fabric.Rect({
  left: outside_left,
  top: 0,
  fill: 'grey',
  stroke: 'black',
  width: doorwidth,
  height: localHeight,
  angle: 0
});

outsideDoor.hasControls = outsideDoor.hasBorders = outsideDoor.selectable = false;
outsideDoor.lockMovementX = outsideDoor.lockMovementY = true;
// Default door pattern
fabric.util.loadImage('images/DoorpatternOut.gif', function (img) {
    outsideDoor.setPatternFill({
        source: img,
        repeat: 'repeat'
    });
    canvas.renderAll();
});
//*******************************************************************************************


//******************************* Adding Date/Time and weather ******************************

var Datetext = new fabric.Text('', { left: 105, top: 112, fontFamily: 'Calibri', fontSize: 20 });
Datetext.setColor('black');
Datetext.selectable = false;

var date_rect = new fabric.Rect({
  left: 85,
  top: 110,
  fill: 'lightgrey',
  stroke: 'darkgrey',
  width: 150,
  height: 25,
  angle: 0
});
date_rect.selectable = false;

var Timetext = new fabric.Text('', { left: 100, top: 80, fontFamily: 'Calibri', fontSize: 30 });
Timetext.setColor('black');
Timetext.selectable = false;

ShowDateTime();

fabric.Image.fromURL('images/weather.gif', function(oImg) {
  oImg.set({left: 800, top: 95, id: this.id});
  oImg.selectable = false;
  oImg.id = 'weather';
  canvas.add(oImg);
});

var Weathertext = new fabric.Text('49 F', { 
  left: 475, 
  top: 80, 
  fontFamily: 'Calibri', 
  fontSize: 30 
});
Weathertext.setColor('black');
Weathertext.selectable = false;

//*******************************************************************************************



//****************** Adding In/out Door knobs ******************************************


var doorknob_inside_locked = fabric.Image.fromURL('images/lockknob.png', function(oImg) {
  oImg.set({left: 1120, top: 1030, id: this.id});
  oImg.id = 'LockKnobIn';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.visible = true;
  oImg.lockMovementY = oImg.lockMovementX = true;
  canvas.add(oImg);
});

var doorknob_inside_unlocked = fabric.Image.fromURL('images/doorknobs/unlockknob2.png', function(oImg) {
  oImg.set({left: 1110, top: 1020, id: this.id});
  oImg.id = 'UnlockKnobIn';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.visible = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  canvas.add(oImg);
});

var deadbolt_locked = fabric.Image.fromURL('images/lockdeadbolt.png', function(oImg) {
  oImg.set({left: 1100, top: 680, id: this.id});
  oImg.id = 'LockDeadbolt';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  canvas.add(oImg);
});

var deadbolt_unlocked = fabric.Image.fromURL('images/unlockdeadbolt.png', function(oImg) {
  oImg.set({left: 1100, top: 680, id: this.id});
  oImg.id = 'UnlockDeadbolt';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.visible = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  canvas.add(oImg);
});


var doorknob_outside_locked = fabric.Image.fromURL('images/doorknobs/knob.png', function(oImg) {
  oImg.set({left: 1480, top: 1030, id: this.id});
  oImg.id = 'knob';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  canvas.add(oImg);
});

fabric.Image.fromURL('images/lockknob.png', function(oImg) {
  oImg.set({left: 1480, top: 1030, id: this.id});
  oImg.id = 'LockKnobOut';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.visible = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  canvas.add(oImg);
});

fabric.Image.fromURL('images/doorknobs/unlockknob2.png', function(oImg) {
  oImg.set({left: 1470, top: 1020, id: this.id});
  oImg.id = 'UnlockKnobOut';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.visible = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  canvas.add(oImg);
});

var Deadbolttext = new fabric.Text(DEADBOLT[syslang], { 
  left: 500, 
  top: 293, 
  fontFamily: 'Calibri', 
  fontSize: 15 
});

Deadbolttext.setColor('black');
Deadbolttext.selectable = false;
//********************************************************************************************


 

//*********************** Components called by functions *************************************
//To Do/Calender 

 fabric.Image.fromURL('images/user1calender.gif', function(oImg) {
  oImg.set({left: 220, top: 730 + ImgHeight, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'user1calender';
   canvas.add(oImg);
});

 fabric.Image.fromURL('images/user1calender.gif', function(oImg) {
  oImg.set({left: 220, top: 730 + ImgHeight, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'user2calender';
  canvas.add(oImg);
});

 fabric.Image.fromURL('images/user1todo.gif', function(oImg) {
  oImg.set({left: 660, top: 730 + ImgHeight, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'user1todo';
  canvas.add(oImg);
});

 fabric.Image.fromURL('images/user2todo.gif', function(oImg) {
  oImg.set({left: 660, top: 730 + ImgHeight, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'user2todo';
  canvas.add(oImg);
});


 fabric.Image.fromURL('images/UsersList.gif', function(oImg) {
  oImg.set({left: 440, top: 730 + ImgHeight, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'userslist';
  canvas.add(oImg);
});

 fabric.Image.fromURL('images/user1name.gif', function(oImg) {
  oImg.set({left: 440, top: 830 + ImgHeight, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'user1name';
  canvas.add(oImg);
});

 fabric.Image.fromURL('images/user2name.gif', function(oImg) {
  oImg.set({left: 440, top: 911 + ImgHeight, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'user2name';
  canvas.add(oImg);
});

  
  

//******************************* Home Button ****************************************
var home_topheight = 555;

fabric.Image.fromURL('images/home.gif', function(oImg) {
  oImg.set({left: 549, top: 555, id: this.id});
  oImg.id = 'home';
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  canvas.add(oImg);
});

var Line = new fabric.Line([100, 310, 460, 310], { lfill: 'black', stroke: 'black',strokeWidth: 0.5});
Line.selectable = false;
//********************************************************************************************

  
  
//********************************************************************************************
// Main panel components
var PanelRect = new fabric.Rect({
  left: 72,
  top: 310,
  fill: 'lightgrey',
  stroke: 'darkgrey',
  width: 410,
  height: 200,
  angle: 0
});
  PanelRect.visible = false;
  PanelRect.hasControls = PanelRect.hasBorders = PanelRect.selectable = false;
  PanelRect.lockMovementX = PanelRect.lockMovementY = true;

  fabric.util.loadImage('images/panelpattern.gif', function (img) {
    PanelRect.setPatternFill({
        source: img,
        repeat: 'repeat'
    });
});
//********************************************************************************************
  
  
  
//******************************************************************************************** 
// FIRST COLUMN OF ITEMS
// MESSAGES
  fabric.Image.fromURL('images/messages.gif', function(oImg) {
    oImg.set({left: 189, top: 730, id: this.id});
    oImg.visible = false;
    oImg.hasControls = oImg.hasBorders = false;
    oImg.lockMovementY = oImg.lockMovementX = true;
    oImg.id = 'messages';
    canvas.add(oImg);
});
  var Messagestext = new fabric.Text(MESSAGES[syslang], { left: 85, top: 385, fontFamily: 'Times', fontSize: 15 });
  Messagestext.setColor('black');
  Messagestext.selectable = false;
  Messagestext.visible = false;

// MIRROR   
var Mirror = new fabric.Rect({
  left: 22,
  top: 0,
  fill: 'grey',
  stroke: 'black',
  width: 555,
  height: localHeight,
  angle: 0
});
  Mirror.visible = false;
  Mirror.hasControls = Mirror.hasBorders = Mirror.selectable = false;
  Mirror.lockMovementX = Mirror.lockMovementY = true;

  fabric.util.loadImage('images/mirrorwomen.gif', function (img) {
    Mirror.setPatternFill({
        source: img,
        repeat: 'repeat'
    });
}); 
fabric.Image.fromURL('images/mirror.gif', function(oImg) {
  oImg.set({left: 189, top: 925, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'mirror';
  canvas.add(oImg);
});
  var Mirrortext = new fabric.Text(MIRROR[syslang], { left: 95, top: 475, fontFamily: 'Times', fontSize: 15 });
  Mirrortext.setColor('black');
  Mirrortext.selectable = false;
  Mirrortext.visible = false;

//********************************************************************************************
  
  
//******************************************************************************************** 
// SECOND COLUMN OF ITEMS
// CAMERA    
fabric.Image.fromURL('images/camera.gif', function(oImg) {
  oImg.set({left: 369, top: 735, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'camera';
  canvas.add(oImg);
});
  var Cameratext = new fabric.Text(CAMERA[syslang], { left: 165, top: 385, fontFamily: 'Times', fontSize: 15 });
  Cameratext.setColor('black');
  Cameratext.selectable = false;
  Cameratext.visible = false;
  
// LIGHTS    
fabric.Image.fromURL('images/lights.gif', function(oImg) {
  oImg.set({left: 369, top: 920, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'lights';
  canvas.add(oImg);
});
  var Lightstext = new fabric.Text(LIGHTS[syslang], { left: 175, top: 475, fontFamily: 'Times', fontSize: 15 });
  Lightstext.setColor('black');
  Lightstext.selectable = false;
  Lightstext.visible = false;
  var Lights = new fabric.Rect({
  left: 22,
  top: 0,
  fill: 'grey',
  stroke: 'black',
  width: 555,
  height: localHeight,
  angle: 0
});
  Lights.visible = false;
  Lights.hasControls = Lights.hasBorders = Lights.selectable = false;
  Lights.lockMovementX = Lights.lockMovementY = true;

  fabric.util.loadImage('images/black.gif', function (img) {
    Lights.setPatternFill({
        source: img,
        repeat: 'repeat'
    });
});

//********************************************************************************************
  
  
//******************************************************************************************** 
// THIRD COLUMN OF ITEMS
// TRAFFIC    
fabric.Image.fromURL('images/traffic.gif', function(oImg) {
  oImg.set({left: 549, top: 720, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'traffic';
  canvas.add(oImg);
});
var Traffictext = new fabric.Text(TRAFFIC[syslang], { 
  left: 255, 
  top: 385, 
  fontFamily: 'Times', 
  fontSize: 15
});
  Traffictext.setColor('black');
  Traffictext.selectable = false;
  Traffictext.visible = false;
    var Traffic = new fabric.Rect({
  left: 175,
  top: 310,
  fill: 'grey',
  stroke: 'black',
  width: 210,
  height: 200,
  angle: 0
});
  Traffic.visible = false;
  Traffic.hasControls = Traffic.hasBorders = Traffic.selectable = false;
  Traffic.lockMovementX = Traffic.lockMovementY = true;

  fabric.util.loadImage('images/traffic.png', function (img) {
    Traffic.setPatternFill({
        source: img,
        repeat: 'repeat'
    });
});
// ALARM    
fabric.Image.fromURL('images/alarm.gif', function(oImg) {
  oImg.set({left: 549, top: 920, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'alarm';
  canvas.add(oImg);
});
  var Alarmtext = new fabric.Text(ALARM[syslang], { 
    left: 255, 
    top: 475, 
    fontFamily: 'Times', 
    fontSize: 15 
  });
  Alarmtext.setColor('black');
  Alarmtext.selectable = false;
  Alarmtext.visible = false;
//********************************************************************************************
  
  
  
//******************************************************************************************** 
// FOURTH COLUMN OF ITEMS
// TRANSPORT - CTA    
fabric.Image.fromURL('images/cta.gif', function(oImg) {
  oImg.set({left: 729, top: 720, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'cta';
  canvas.add(oImg);
});
  var Transporttext = new fabric.Text(TRANSPORT[syslang], { left: 330, top: 385, fontFamily: 'Times', fontSize: 15 });
  Transporttext.setColor('black');
  Transporttext.selectable = false;
  Transporttext.visible = false;
 var Transport = new fabric.Rect({
  left: 185,
  top: 310,
  //fill: 'grey',
  //stroke: 'black',
  width: 187,
  height: 195,
  angle: 0
});
  Transport.visible = false;
  Transport.hasControls = Transport.hasBorders = Transport.selectable = false;
  Transport.lockMovementX = Transport.lockMovementY = true;

  fabric.util.loadImage('images/transport.jpeg', function (img) {
    Transport.setPatternFill({
        source: img,
        repeat: 'repeat'
    });
});  

// EMERGENCY    
fabric.Image.fromURL('images/911.gif', function(oImg) {
  oImg.set({left: 729, top: 935, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = '911';
  canvas.add(oImg);
});
  var Emergtext = new fabric.Text(EMERGENCY[syslang], { left: 325, top: 475, fontFamily: 'Times', fontSize: 15 });
  Emergtext.setColor('black');
  Emergtext.selectable = false;
  Emergtext.visible = false;
//********************************************************************************************
  
  
//******************************************************************************************** 
// FIFTH COLUMN OF ITEMS
// NEWS    
fabric.Image.fromURL('images/news.gif', function(oImg) {
  oImg.set({left: 909, top: 730, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'news';
  canvas.add(oImg);
});
  var Newstext = new fabric.Text(NEWS[syslang], { left: 420, top: 385, fontFamily: 'Times', fontSize: 15 });
  Newstext.setColor('black');
  Newstext.selectable = false;
  Newstext.visible = false;

  var News = new fabric.Rect({
  left: 135,
  top: 310,
  //fill: 'grey',
  //stroke: 'black',
  width: 300,
  height: 202,
  angle: 0
});
  News.visible = false;
  News.hasControls = News.hasBorders = News.selectable = false;
  News.lockMovementX = News.lockMovementY = true;

  fabric.util.loadImage('images/news.jpg', function (img) {
    News.setPatternFill({
        source: img,
        repeat: 'repeat'
    });
}); 
    

// SETTINGS    
fabric.Image.fromURL('images/settings.gif', function(oImg) {
  oImg.set({left: 909, top: 930, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'settings';
  canvas.add(oImg);
});
  var Settingstext = new fabric.Text(SETTINGS[syslang], { left: 415, top: 475, fontFamily: 'Times', fontSize: 15 });
  Settingstext.setColor('black');
  Settingstext.selectable = false;
  Settingstext.visible = false;
//********************************************************************************************



  
  
fabric.Image.fromURL('images/restart.png', function(oImg) {
  oImg.set({left: 550, top: 1150, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'restart';
  canvas.add(oImg);
});
  
  fabric.Image.fromURL('images/alarmOn.gif', function(oImg) {
  oImg.set({left: 549, top: 920, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'alarmOn';
  canvas.add(oImg);
});

    
    
//----------------------- Camera Components ---------------------------
var AvatarOut = new fabric.Rect({
  left: 830,
  top: 250,
  //fill: 'grey',
  stroke: 'black',
  width: 200,
  height: 200,
  angle: 0
});
  AvatarOut.visible = false;
  AvatarOut.hasControls = AvatarOut.hasBorders = AvatarOut.selectable = false;
  AvatarOut.lockMovementX = AvatarOut.lockMovementY = true;

  fabric.util.loadImage('images/AvatarOnOut.gif', function (img) {
    AvatarOut.setPatternFill({
        source: img,
        repeat: 'repeat'
    });
});   
  
var CameraIn = new fabric.Rect({
  left: 100,
  top: 320,
  stroke: 'black',
  width: 100,
  height: 100,
  angle: 0
});
  CameraIn.visible = false;
  CameraIn.hasControls = CameraIn.hasBorders = CameraIn.selectable = false;
  CameraIn.lockMovementX = CameraIn.lockMovementY = true;

  fabric.util.loadImage('images/AvatarIn.gif', function (img) {
    CameraIn.setPatternFill({
        source: img,
        repeat: 'repeat'
    });
}); 

AvatarOnOff = new fabric.Rect({
  left: 210,
  top: 320,
  stroke: 'black',
  width: 40,
  height: 40,
  angle: 0
});
  AvatarOnOff.visible = false;
  AvatarOnOff.hasControls = AvatarOnOff.hasBorders = false;
  AvatarOnOff.lockMovementX = AvatarOnOff.lockMovementY = true;

  fabric.util.loadImage('images/AvatarOn.gif', function (img) {
    AvatarOnOff.setPatternFill({
        source: img,
        repeat: 'repeat'
    });
}); 

LiveOnOff = new fabric.Rect({
  left: 210,
  top: 380,
  stroke: 'black',
  width: 40,
  height: 40,
  angle: 0
});
  LiveOnOff.visible = false;
  LiveOnOff.hasControls = LiveOnOff.hasBorders = false;
  LiveOnOff.lockMovementX = LiveOnOff.lockMovementY = true;

  fabric.util.loadImage('images/LiveOn.gif', function (img) {
    LiveOnOff.setPatternFill({
        source: img,
        repeat: 'repeat'
    });
}); 
    
//------------------------------------------------------------------
fabric.Image.fromURL('images/doorbell.gif', function(oImg) {
  oImg.set({left: 1485, top: 680, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'doorbell';
  canvas.add(oImg);
});

fabric.Image.fromURL('images/writemsg.gif', function(oImg) {
  oImg.set({left: 1470, top: 790, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'writemsg';
  canvas.add(oImg);
});

fabric.Image.fromURL('images/np.gif', function(oImg) {
  oImg.set({left: 1480, top: 860, id: this.id});
  oImg.visible = false;
  oImg.hasControls = oImg.hasBorders = false;
  oImg.lockMovementY = oImg.lockMovementX = true;
  oImg.id = 'np';
  canvas.add(oImg);
});
//********************************************************************************************

// add all of the elements to the canvas

canvas.add(insideDoor);
canvas.add(outsideDoor);
canvas.add(date_rect);
canvas.add(Mirror);
canvas.add(Traffic);
canvas.add(Transport);
canvas.add(News);
canvas.add(Weathertext);
canvas.add(Deadbolttext);
canvas.add(Line);
canvas.add(PanelRect);
canvas.add(Messagestext);
canvas.add(Cameratext);
canvas.add(Traffictext);
canvas.add(Transporttext);
canvas.add(Newstext);
canvas.add(Mirrortext);
canvas.add(Lightstext);
canvas.add(Alarmtext);
canvas.add(Emergtext);
canvas.add(Settingstext);
canvas.add(Lights);
canvas.add(AvatarOut);
canvas.add(CameraIn);
canvas.add(AvatarOnOff);
canvas.add(LiveOnOff);

//************************************** Functions *******************************************
canvas.on('object:selected', function(e) 
{ 
  var activeObject = e.target; 

  //console.log(e.target);
  if(activeObject.id == 'home'){
    HomeSelected();
    canvas.deactivateAll();  
  }
  else if(activeObject.id == 'LockKnobIn')
    UnlockDoorIn();

  else if(activeObject.id == 'UnlockKnobIn')
    LockDoorIn();

  else if(activeObject.id == 'LockKnobOut') {
    if(UserFingerIsRecognizable == true)
    UnlockDoorOut();
  }

  else if(activeObject.id == 'UnlockKnobOut')
    LockDoorOut();

  else if(activeObject.id == 'LockDeadbolt')
     UnlockDeadbolt();

  else if(activeObject.id == 'UnlockDeadbolt')
     LockDeadbolt();

  else if(activeObject.id == 'restart')
     RestartSystem();

  else if(activeObject.id == 'alarmOn')
     AlarmOff();

  else if(activeObject.id == 'alarm')
      AlarmOn();

  else if(activeObject.id == 'user1name')
     {HideUsersList(); User1FromInside();}

 else if(activeObject.id == 'user2name')
     {HideUsersList(); User2FromInside();}
  
  
  if(activeObject.id == 'mirror')
    {
      MirrorSelected();
      canvas.deactivateAll();  
    }
  if(activeObject.id == 'traffic')
    {
      TrafficSelected();
      canvas.deactivateAll();  
    }
  if(activeObject.id == 'lights')
    {
      LightsSelected();
      canvas.deactivateAll();  
    }
  if(activeObject.id == 'cta')
    {
      TransportSelected();
      canvas.deactivateAll();  
    }
  if(activeObject.id == 'news')
    {
      NewsSelected();
      canvas.deactivateAll();  
    }
   
   if(activeObject.id == 'camera')
    {
      RunCamera();
      //canvas.deactivateAll();  
    }

  });




AvatarOnOff.on('selected', function()
    {
      if (AvatarIsActive == true)
      RunInsideCameraLive();
      else 
      RunInsideCameraAvatar(); 
    });

LiveOnOff.on('selected', function()
    {
      if (AvatarIsActive == true)
      RunInsideCameraLive();
      else 
      RunInsideCameraAvatar(); 
    });


//********************************************************************************************


// code adapted from http://jsfiddle.net/tornado1979/39up3jcm/
// this code deals with scaling all the elements on the canvas

function zoomAll(SCALE_FACTOR) {

      var objects = canvas.getObjects();
      for (var i in objects) {
          var scaleX = objects[i].scaleX;
          var scaleY = objects[i].scaleY;
          var left = objects[i].left;
          var top = objects[i].top;

          var tempScaleX = scaleX * SCALE_FACTOR;
          var tempScaleY = scaleY * SCALE_FACTOR;
          var tempLeft = left * SCALE_FACTOR;
          var tempTop = top * SCALE_FACTOR;

          objects[i].scaleX = tempScaleX;
          objects[i].scaleY = tempScaleY;
          objects[i].left = tempLeft;
          objects[i].top = tempTop;

          objects[i].setCoords();
      }
  
      canvas.renderAll();
  }

// draw everything at the appropriate scale for this canvas
zoomAll(canvas.height / localHeight);

//})();

</script>
		
</head>
  
</html>